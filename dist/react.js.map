{
  "version": 3,
  "sources": ["../src/react.ts"],
  "sourcesContent": [
    "import { useState, useEffect, useCallback } from \"react\";\nimport type { SubscriptionData } from \"./types\";\n\n/**\n * Options for subscription hooks\n */\nexport interface UseSubscriptionOptions {\n  /** Organization ID to fetch subscription for. If not provided, fetches for current user */\n  organizationId?: string;\n  /** Whether to fetch on mount. Defaults to true */\n  fetchOnMount?: boolean;\n  /** Polling interval in ms. Set to 0 to disable polling */\n  pollingInterval?: number;\n}\n\n/**\n * Return type for useSubscription hook\n */\nexport interface UseSubscriptionReturn {\n  subscription: SubscriptionData | null;\n  planId: string | null;\n  isActive: boolean;\n  isTrialing: boolean;\n  isLoading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\n/**\n * Create subscription hooks for the PayMongo client\n * \n * @example\n * ```tsx\n * import { createAuthClient } from \"better-auth/react\";\n * import { paymongoClient } from \"./paymongo-plugin/client\";\n * import { createSubscriptionHooks } from \"./paymongo-plugin/react\";\n * \n * const authClient = createAuthClient({ plugins: [paymongoClient()] });\n * const { useSubscription, usePlan } = createSubscriptionHooks(authClient);\n * \n * function MyComponent() {\n *   const { planId, isActive } = usePlan({ organizationId: \"org_123\" });\n *   return <div>Plan: {planId}, Active: {isActive ? \"Yes\" : \"No\"}</div>;\n * }\n * ```\n */\nexport function createSubscriptionHooks(authClient: {\n  paymongo: {\n    getSubscription: (options?: { organizationId?: string }) => Promise<{ data: SubscriptionData | null; error: { message: string } | null }>;\n  };\n}) {\n  /**\n   * Hook to get full subscription data with reactive updates\n   */\n  function useSubscription(options: UseSubscriptionOptions = {}): UseSubscriptionReturn {\n    const { organizationId, fetchOnMount = true, pollingInterval = 0 } = options;\n\n    const [subscription, setSubscription] = useState<SubscriptionData | null>(null);\n    const [isLoading, setIsLoading] = useState(fetchOnMount);\n    const [error, setError] = useState<Error | null>(null);\n\n    const refetch = useCallback(async () => {\n      setIsLoading(true);\n      setError(null);\n      try {\n        const result = await authClient.paymongo.getSubscription(\n          organizationId ? { organizationId } : undefined\n        );\n        if (result.error) {\n          setError(new Error(result.error.message));\n        } else {\n          setSubscription(result.data);\n        }\n      } catch (e) {\n        setError(e instanceof Error ? e : new Error(\"Failed to fetch subscription\"));\n      } finally {\n        setIsLoading(false);\n      }\n    }, [organizationId]);\n\n    useEffect(() => {\n      if (fetchOnMount) {\n        refetch();\n      }\n    }, [fetchOnMount, refetch]);\n\n    useEffect(() => {\n      if (pollingInterval > 0) {\n        const interval = setInterval(refetch, pollingInterval);\n        return () => clearInterval(interval);\n      }\n    }, [pollingInterval, refetch]);\n\n    const isActive = subscription?.status === \"active\";\n    const isTrialing = subscription?.status === \"trialing\";\n\n    return {\n      subscription,\n      planId: subscription?.planId ?? null,\n      isActive,\n      isTrialing,\n      isLoading,\n      error,\n      refetch\n    };\n  }\n\n  /**\n   * Hook to get just the plan ID with reactive updates\n   */\n  function usePlan(options: UseSubscriptionOptions = {}) {\n    const { planId, isActive, isTrialing, isLoading, error, refetch } = useSubscription(options);\n    return { planId, isActive, isTrialing, isLoading, error, refetch };\n  }\n\n  /**\n   * Hook to check if subscription is active\n   */\n  function useIsSubscribed(options: UseSubscriptionOptions = {}) {\n    const { isActive, isTrialing, isLoading, error, refetch } = useSubscription(options);\n    return {\n      isSubscribed: isActive || isTrialing,\n      isActive,\n      isTrialing,\n      isLoading,\n      error,\n      refetch\n    };\n  }\n\n  /**\n   * Hook to get usage information for a specific limit\n   */\n  function useUsage(\n    limitKey: string,\n    options: UseSubscriptionOptions = {}\n  ) {\n    const { subscription, isLoading, error, refetch } = useSubscription(options);\n\n    const plan = subscription?.planId;\n    const usage = subscription?.usage[limitKey] ?? 0;\n\n    return {\n      usage,\n      plan,\n      isLoading,\n      error,\n      refetch\n    };\n  }\n\n  return {\n    useSubscription,\n    usePlan,\n    useIsSubscribed,\n    useUsage\n  };\n}\n"
  ],
  "mappings": ";AAAA;AA8CO,SAAS,uBAAuB,CAAC,YAIrC;AAAA,EAID,SAAS,eAAe,CAAC,UAAkC,CAAC,GAA0B;AAAA,IACpF,QAAQ,gBAAgB,eAAe,MAAM,kBAAkB,MAAM;AAAA,IAErE,OAAO,cAAc,mBAAmB,SAAkC,IAAI;AAAA,IAC9E,OAAO,WAAW,gBAAgB,SAAS,YAAY;AAAA,IACvD,OAAO,OAAO,YAAY,SAAuB,IAAI;AAAA,IAErD,MAAM,UAAU,YAAY,YAAY;AAAA,MACtC,aAAa,IAAI;AAAA,MACjB,SAAS,IAAI;AAAA,MACb,IAAI;AAAA,QACF,MAAM,SAAS,MAAM,WAAW,SAAS,gBACvC,iBAAiB,EAAE,eAAe,IAAI,SACxC;AAAA,QACA,IAAI,OAAO,OAAO;AAAA,UAChB,SAAS,IAAI,MAAM,OAAO,MAAM,OAAO,CAAC;AAAA,QAC1C,EAAO;AAAA,UACL,gBAAgB,OAAO,IAAI;AAAA;AAAA,QAE7B,OAAO,GAAG;AAAA,QACV,SAAS,aAAa,QAAQ,IAAI,IAAI,MAAM,8BAA8B,CAAC;AAAA,gBAC3E;AAAA,QACA,aAAa,KAAK;AAAA;AAAA,OAEnB,CAAC,cAAc,CAAC;AAAA,IAEnB,UAAU,MAAM;AAAA,MACd,IAAI,cAAc;AAAA,QAChB,QAAQ;AAAA,MACV;AAAA,OACC,CAAC,cAAc,OAAO,CAAC;AAAA,IAE1B,UAAU,MAAM;AAAA,MACd,IAAI,kBAAkB,GAAG;AAAA,QACvB,MAAM,WAAW,YAAY,SAAS,eAAe;AAAA,QACrD,OAAO,MAAM,cAAc,QAAQ;AAAA,MACrC;AAAA,OACC,CAAC,iBAAiB,OAAO,CAAC;AAAA,IAE7B,MAAM,WAAW,cAAc,WAAW;AAAA,IAC1C,MAAM,aAAa,cAAc,WAAW;AAAA,IAE5C,OAAO;AAAA,MACL;AAAA,MACA,QAAQ,cAAc,UAAU;AAAA,MAChC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA;AAAA,EAMF,SAAS,OAAO,CAAC,UAAkC,CAAC,GAAG;AAAA,IACrD,QAAQ,QAAQ,UAAU,YAAY,WAAW,OAAO,YAAY,gBAAgB,OAAO;AAAA,IAC3F,OAAO,EAAE,QAAQ,UAAU,YAAY,WAAW,OAAO,QAAQ;AAAA;AAAA,EAMnE,SAAS,eAAe,CAAC,UAAkC,CAAC,GAAG;AAAA,IAC7D,QAAQ,UAAU,YAAY,WAAW,OAAO,YAAY,gBAAgB,OAAO;AAAA,IACnF,OAAO;AAAA,MACL,cAAc,YAAY;AAAA,MAC1B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA;AAAA,EAMF,SAAS,QAAQ,CACf,UACA,UAAkC,CAAC,GACnC;AAAA,IACA,QAAQ,cAAc,WAAW,OAAO,YAAY,gBAAgB,OAAO;AAAA,IAE3E,MAAM,OAAO,cAAc;AAAA,IAC3B,MAAM,QAAQ,cAAc,MAAM,aAAa;AAAA,IAE/C,OAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA;AAAA,EAGF,OAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA;",
  "debugId": "2644A1D9D72E4E7264756E2164756E21",
  "names": []
}