{
  "version": 3,
  "sources": ["../src/client.ts"],
  "sourcesContent": [
    "import type { BetterAuthClientPlugin } from \"better-auth/client\";\nimport type { BetterFetchOption, BetterFetch } from \"@better-fetch/fetch\";\nimport { atom } from \"nanostores\";\nimport type { paymongo } from \"./server\";\nimport type { AttachResponse, CheckResponse, TrackResponse } from \"./types\";\n\nexport const paymongoClient = () => {\n\tconst $subscriptionSignal = atom<boolean>(false);\n\n\treturn {\n\t\tid: \"paymongo\",\n\t\t$InferServerPlugin: {} as ReturnType<typeof paymongo>,\n\n\t\tgetAtoms: ($fetch: BetterFetch) => ({\n\t\t\t$subscriptionSignal,\n\t\t}),\n\n\t\tgetActions: ($fetch: <T>(url: string, options?: BetterFetchOption) => Promise<{ data: T | null; error: { message: string } | null }>) => ({\n\t\t\t/**\n\t\t\t * Attach a subscription plan to the user or organization.\n\t\t\t * Creates a PayMongo checkout session and returns the URL for payment.\n\t\t\t * \n\t\t\t * @param planId - The plan ID to subscribe to\n\t\t\t * @param options - Checkout configuration\n\t\t\t * @param options.successUrl - URL to redirect after successful payment\n\t\t\t * @param options.cancelUrl - URL to redirect if payment is cancelled\n\t\t\t * @param options.organizationId - Optional organization ID (defaults to current user)\n\t\t\t * @returns Checkout URL and session ID\n\t\t\t */\n\t\t\tattach: async (planId: string, options: { successUrl: string; cancelUrl: string; organizationId?: string }) => {\n\t\t\t\tconst result = await $fetch<AttachResponse>('/paymongo/attach', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: { planId, ...options }\n\t\t\t\t});\n\t\t\t\tif (result.data) {\n\t\t\t\t\t$subscriptionSignal.set(!$subscriptionSignal.get());\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Check if a feature is allowed for the current user or organization.\n\t\t\t * For metered features, also returns usage balance and limit.\n\t\t\t * \n\t\t\t * @param featureId - The feature ID to check\n\t\t\t * @param options - Optional configuration\n\t\t\t * @param options.organizationId - Optional organization ID (defaults to current user)\n\t\t\t * @returns Feature access status and usage info\n\t\t\t */\n\t\t\tcheck: async (featureId: string, options?: { organizationId?: string }) => {\n\t\t\t\tconst params = new URLSearchParams({ feature: featureId });\n\t\t\t\tif (options?.organizationId) params.set('organizationId', options.organizationId);\n\t\t\t\treturn $fetch<CheckResponse>(`/paymongo/check?${params}`, { method: 'GET' });\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Track usage for a metered feature.\n\t\t\t * Increments (or decrements with negative delta) the usage balance.\n\t\t\t * \n\t\t\t * @param featureId - The feature ID to track\n\t\t\t * @param options - Optional configuration\n\t\t\t * @param options.delta - Amount to increment (default: 1, use negative to decrement)\n\t\t\t * @param options.organizationId - Optional organization ID (defaults to current user)\n\t\t\t * @returns Updated usage balance and limit\n\t\t\t */\n\t\t\ttrack: async (featureId: string, options?: { delta?: number; organizationId?: string }) => {\n\t\t\t\tconst result = await $fetch<TrackResponse>('/paymongo/track', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: { feature: featureId, delta: options?.delta, organizationId: options?.organizationId }\n\t\t\t\t});\n\t\t\t\tif (result.data) {\n\t\t\t\t\t$subscriptionSignal.set(!$subscriptionSignal.get());\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}),\n\n\t\tpathMethods: {\n\t\t\t\"/paymongo/check\": \"GET\"\n\t\t},\n\n\t\tatomListeners: [\n\t\t\t{\n\t\t\t\tmatcher: (path: string) => path.startsWith(\"/paymongo/\"),\n\t\t\t\tsignal: \"$subscriptionSignal\"\n\t\t\t}\n\t\t]\n\t} satisfies BetterAuthClientPlugin;\n};\n"
  ],
  "mappings": ";AAEA;AAIO,IAAM,iBAAiB,MAAM;AAAA,EACnC,MAAM,sBAAsB,KAAc,KAAK;AAAA,EAE/C,OAAO;AAAA,IACN,IAAI;AAAA,IACJ,oBAAoB,CAAC;AAAA,IAErB,UAAU,CAAC,YAAyB;AAAA,MACnC;AAAA,IACD;AAAA,IAEA,YAAY,CAAC,YAA6H;AAAA,MAYzI,QAAQ,OAAO,QAAgB,YAAgF;AAAA,QAC9G,MAAM,SAAS,MAAM,OAAuB,oBAAoB;AAAA,UAC/D,QAAQ;AAAA,UACR,MAAM,EAAE,WAAW,QAAQ;AAAA,QAC5B,CAAC;AAAA,QACD,IAAI,OAAO,MAAM;AAAA,UAChB,oBAAoB,IAAI,CAAC,oBAAoB,IAAI,CAAC;AAAA,QACnD;AAAA,QACA,OAAO;AAAA;AAAA,MAYR,OAAO,OAAO,WAAmB,YAA0C;AAAA,QAC1E,MAAM,SAAS,IAAI,gBAAgB,EAAE,SAAS,UAAU,CAAC;AAAA,QACzD,IAAI,SAAS;AAAA,UAAgB,OAAO,IAAI,kBAAkB,QAAQ,cAAc;AAAA,QAChF,OAAO,OAAsB,mBAAmB,UAAU,EAAE,QAAQ,MAAM,CAAC;AAAA;AAAA,MAa5E,OAAO,OAAO,WAAmB,YAA0D;AAAA,QAC1F,MAAM,SAAS,MAAM,OAAsB,mBAAmB;AAAA,UAC7D,QAAQ;AAAA,UACR,MAAM,EAAE,SAAS,WAAW,OAAO,SAAS,OAAO,gBAAgB,SAAS,eAAe;AAAA,QAC5F,CAAC;AAAA,QACD,IAAI,OAAO,MAAM;AAAA,UAChB,oBAAoB,IAAI,CAAC,oBAAoB,IAAI,CAAC;AAAA,QACnD;AAAA,QACA,OAAO;AAAA;AAAA,IAET;AAAA,IAEA,aAAa;AAAA,MACZ,mBAAmB;AAAA,IACpB;AAAA,IAEA,eAAe;AAAA,MACd;AAAA,QACC,SAAS,CAAC,SAAiB,KAAK,WAAW,YAAY;AAAA,QACvD,QAAQ;AAAA,MACT;AAAA,IACD;AAAA,EACD;AAAA;",
  "debugId": "E5A0B61EB21DCDDE64756E2164756E21",
  "names": []
}